/*!
  \file even.c
  \brief


  created by Kim Youngmin (ymkim@huvitz.com)
  creation date : Thu Oct 28 18:48:49 KST 2010

*/
#include <stdio.h>
#include <math.h>
#include <stdlib.h>

#define CONST_PI 3.141592
#define MAX_RECORD_SIZE 1440

int int_r_list[MAX_RECORD_SIZE] = {
2620,2619,2620,2621,2622,2623,2624,2624,2625,2625,2626,2626,2627,2627,2627,
2627,2627,2627,2627,2627,2627,2626,2626,2626,2625,2624,2624,2623,2622,2621,
2620,2619,2618,2617,2616,2615,2613,2612,2610,2609,2607,2605,2604,2602,2600,
2598,2596,2593,2591,2589,2586,2584,2581,2578,2576,2573,2570,2567,2564,2560,
2557,2554,2550,2546,2543,2539,2535,2531,2527,2523,2518,2514,2509,2505,2500,
2496,2491,2486,2481,2476,2471,2466,2461,2456,2451,2446,2441,2436,2430,2425,
2420,2415,2409,2404,2399,2393,2388,2383,2378,2372,2367,2362,2357,2351,2346,
2341,2336,2331,2326,2320,2315,2310,2305,2300,2295,2289,2284,2279,2274,2268,
2263,2258,2253,2247,2242,2236,2231,2226,2220,2215,2209,2204,2198,2193,2188,
2182,2177,2171,2166,2161,2155,2150,2145,2139,2134,2129,2124,2118,2113,2108,
2103,2098,2093,2088,2083,2078,2073,2068,2064,2059,2054,2049,2045,2040,2035,
2031,2026,2022,2017,2012,2008,2003,1999,1994,1990,1986,1981,1977,1972,1968,
1964,1959,1955,1951,1946,1942,1937,1933,1929,1924,1920,1916,1912,1907,1903,
1899,1895,1891,1887,1883,1879,1878,1877,1876,1874,1871,1869,1865,1861,1857,
1853,1848,1843,1838,1834,1829,1825,1820,1817,1813,1810,1807,1804,1801,1798,
1795,1793,1790,1787,1784,1782,1779,1776,1774,1771,1768,1766,1763,1760,1758,
1755,1752,1749,1747,1744,1741,1738,1735,1733,1730,1729,1729,1728,1727,1726,
1725,1724,1723,1721,1719,1717,1715,1713,1710,1708,1705,1703,1700,1697,1694,
1691,1688,1686,1683,1680,1677,1675,1672,1670,1667,1665,1663,1661,1659,1657,
1656,1654,1653,1652,1650,1649,1648,1647,1645,1644,1643,1642,1641,1639,1638,
1637,1636,1634,1633,1632,1631,1629,1628,1627,1626,1625,1625,1624,1624,1623,
1622,1622,1621,1620,1619,1618,1617,1616,1615,1614,1613,1612,1611,1610,1609,
1608,1608,1607,1606,1606,1606,1605,1605,1605,1604,1604,1604,1604,1604,1604,
1604,1603,1603,1603,1603,1603,1603,1603,1603,1603,1602,1602,1602,1602,1602,
1602,1602,1601,1601,1601,1601,1601,1601,1601,1601,1601,1601,1601,1601,1601,
1601,1602,1602,1602,1603,1603,1604,1604,1605,1605,1606,1607,1608,1608,1609,
1610,1611,1612,1613,1613,1614,1615,1616,1616,1617,1618,1619,1620,1621,1622,
1623,1624,1625,1626,1627,1628,1629,1631,1632,1633,1634,1635,1636,1637,1638,
1639,1640,1641,1642,1643,1644,1645,1646,1648,1649,1651,1652,1654,1656,1658,
1660,1662,1665,1667,1669,1672,1674,1676,1678,1681,1682,1684,1686,1687,1689,
1690,1691,1691,1692,1692,1692,1693,1695,1697,1699,1701,1704,1706,1708,1710,
1713,1715,1717,1719,1722,1724,1726,1729,1731,1733,1736,1738,1740,1742,1745,
1747,1749,1752,1754,1756,1759,1761,1763,1766,1768,1771,1773,1776,1778,1781,
1783,1786,1788,1791,1794,1797,1799,1802,1805,1808,1811,1814,1817,1820,1823,
1826,1829,1832,1835,1838,1842,1845,1848,1851,1854,1857,1861,1864,1867,1870,
1873,1876,1879,1883,1886,1889,1892,1895,1898,1901,1904,1907,1910,1913,1916,
1919,1922,1925,1928,1931,1934,1937,1940,1943,1946,1949,1953,1956,1959,1961,
1964,1969,1973,1976,1979,1983,1987,1990,1994,1998,2001,2005,2009,2013,2017,
2020,2024,2028,2032,2036,2040,2043,2047,2051,2055,2058,2062,2066,2069,2073,
2076,2080,2083,2086,2089,2092,2096,2099,2102,2105,2108,2111,2114,2117,2120,
2123,2126,2129,2132,2135,2137,2140,2143,2146,2148,2151,2154,2156,2159,2161,
2164,2166,2168,2171,2173,2175,2177,2179,2182,2183,2185,2187,2189,2191,2193,
2194,2196,2197,2199,2200,2202,2203,2204,2206,2207,2208,2209,2210,2211,2212,
2213,2214,2215,2215,2216,2217,2218,2218,2219,2220,2220,2221,2221,2222,2222,
2222,2223,2223,2223,2224,2224,2224,2224,2224,2224,2224,2224,2224,2224,2224,
2224,2223,2223,2223,2223,2222,2222,2222,2221,2221,2220,2220,2219,2218,2218,
2217,2216,2215,2214,2213,2212,2211,2210,2209,2208,2207,2206,2205,2203,2202,
2201,2199,2198,2197,2195,2194,2192,2191,2189,2188,2186,2185,2183,2181,2180,
2178,2176,2174,2173,2171,2169,2167,2165,2163,2161,2159,2157,2155,2153,2150,
2148,2146,2143,2141,2138,2136,2133,2130,2128,2125,2122,2120,2117,2114,2111,
2109,2106,2103,2100,2097,2095,2092,2089,2086,2083,2080,2078,2075,2072,2069,
2066,2063,2060,2057,2054,2052,2049,2046,2043,2040,2037,2034,2031,2028,2025,
2022,2019,2016,2013,2010,2007,2003,2000,1997,1994,1991,1987,1984,1981,1977,
1974,1971,1968,1964,1961,1957,1954,1951,1947,1944,1941,1937,1934,1931,1927,
1924,1921,1917,1914,1911,1908,1905,1902,1898,1895,1892,1889,1886,1883,1880,
1877,1875,1872,1869,1866,1863,1861,1858,1855,1852,1850,1847,1844,1842,1839,
1837,1834,1831,1829,1826,1823,1820,1818,1815,1812,1809,1807,1804,1801,1798,
1795,1792,1789,1786,1784,1781,1778,1775,1772,1769,1767,1764,1761,1758,1755,
1752,1750,1747,1746,1745,1743,1741,1739,1736,1733,1730,1727,1723,1720,1717,
1714,1712,1709,1707,1706,1704,1702,1700,1697,1695,1693,1691,1689,1687,1685,
1682,1680,1678,1676,1673,1671,1669,1666,1664,1662,1659,1657,1655,1652,1650,
1648,1645,1643,1641,1638,1636,1634,1631,1629,1627,1625,1623,1622,1620,1618,
1616,1614,1612,1610,1608,1605,1603,1600,1598,1596,1593,1591,1589,1587,1585,
1583,1582,1580,1579,1578,1577,1576,1575,1574,1574,1572,1571,1570,1568,1567,
1566,1564,1563,1562,1560,1559,1557,1556,1555,1553,1551,1550,1548,1547,1545,
1543,1543,1542,1541,1540,1539,1538,1536,1535,1534,1532,1531,1529,1528,1526,
1525,1523,1522,1520,1519,1517,1516,1515,1514,1513,1512,1511,1510,1509,1509,
1508,1507,1507,1506,1506,1506,1505,1505,1504,1504,1503,1503,1502,1502,1501,
1501,1500,1499,1499,1498,1498,1497,1496,1496,1495,1495,1494,1493,1493,1493,
1492,1492,1491,1491,1491,1490,1490,1489,1489,1489,1488,1488,1488,1488,1488,
1488,1488,1488,1488,1488,1488,1488,1488,1488,1488,1489,1489,1489,1489,1489,
1490,1490,1490,1491,1491,1491,1491,1492,1492,1492,1493,1493,1493,1493,1493,
1493,1494,1494,1494,1494,1494,1494,1495,1495,1495,1496,1496,1497,1498,1498,
1499,1499,1499,1500,1501,1501,1502,1503,1503,1504,1505,1506,1506,1507,1508,
1509,1510,1511,1512,1513,1514,1515,1516,1517,1518,1519,1521,1522,1523,1524,
1526,1527,1528,1530,1531,1532,1534,1535,1536,1538,1539,1540,1542,1543,1544,
1546,1547,1548,1550,1551,1552,1554,1555,1557,1558,1560,1561,1563,1564,1565,
1567,1569,1571,1573,1575,1578,1580,1583,1585,1588,1590,1592,1593,1595,1596,
1597,1598,1600,1602,1604,1607,1609,1611,1614,1616,1618,1621,1623,1625,1628,
1630,1632,1635,1637,1640,1642,1644,1647,1649,1652,1654,1656,1659,1661,1664,
1666,1669,1671,1674,1677,1679,1682,1684,1687,1690,1692,1695,1698,1700,1703,
1706,1708,1710,1713,1716,1720,1724,1727,1729,1732,1735,1739,1742,1745,1748,
1752,1755,1758,1762,1765,1768,1772,1775,1779,1782,1786,1789,1793,1797,1800,
1804,1808,1811,1815,1819,1823,1826,1830,1834,1838,1842,1846,1849,1853,1857,
1861,1865,1869,1873,1877,1881,1885,1889,1894,1898,1902,1906,1911,1915,1919,
1924,1928,1933,1937,1942,1946,1951,1956,1961,1965,1970,1975,1980,1985,1990,
1995,2000,2005,2010,2015,2020,2025,2030,2035,2041,2046,2051,2056,2061,2066,
2071,2076,2081,2087,2092,2097,2102,2107,2112,2117,2122,2127,2132,2137,2142,
2148,2153,2158,2163,2168,2173,2178,2183,2188,2193,2198,2203,2208,2212,2217,
2222,2226,2231,2235,2239,2243,2246,2249,2252,2256,2260,2264,2269,2275,2280,
2286,2292,2298,2305,2311,2317,2323,2329,2334,2339,2344,2348,2352,2355,2358,
2361,2366,2372,2377,2382,2387,2392,2397,2402,2406,2411,2415,2420,2424,2428,
2433,2437,2441,2445,2449,2453,2457,2461,2465,2469,2472,2476,2480,2484,2488,
2492,2495,2499,2503,2507,2511,2514,2518,2522,2525,2529,2533,2536,2539,2543,
2546,2550,2553,2556,2559,2563,2566,2569,2572,2575,2578,2580,2583,2586,2589,
2591,2594,2596,2598,2600,2602,2604,2606,2608,2610,2611,2613,2614,2616,2617,
};

int int_a_list[MAX_RECORD_SIZE] = {
20,45,70,95,120,145,170,195,220,245,270,295,320,345,370,395,420,445,470,
495,520,545,570,595,619,644,669,694,719,744,769,794,819,844,869,894,919,
944,969,994,1019,1044,1069,1094,1119,1144,1169,1194,1219,1244,1269,1294,
1319,1344,1369,1395,1420,1445,1470,1495,1520,1545,1570,1595,1620,1645,1671,
1696,1721,1746,1771,1796,1821,1846,1871,1896,1921,1946,1971,1996,2021,2046,
2071,2096,2121,2146,2171,2196,2221,2246,2271,2296,2321,2346,2370,2395,2420,
2445,2470,2495,2520,2545,2569,2594,2619,2644,2669,2694,2719,2743,2768,2793,
2818,2843,2868,2893,2918,2943,2968,2993,3018,3043,3068,3093,3118,3143,3168,
3193,3218,3243,3268,3293,3318,3343,3368,3393,3418,3443,3468,3493,3518,3543,
3568,3593,3618,3643,3668,3693,3717,3742,3767,3792,3817,3842,3867,3892,3917,
3942,3967,3991,4016,4041,4066,4091,4116,4141,4166,4191,4216,4241,4266,4291,
4316,4341,4366,4391,4416,4441,4466,4491,4516,4541,4566,4591,4617,4642,4667,
4692,4717,4742,4767,4792,4817,4842,4867,4892,4917,4942,4967,4992,5017,5021,
5027,5036,5048,5064,5082,5104,5130,5158,5189,5221,5256,5291,5326,5362,5396,
5428,5459,5488,5515,5539,5564,5589,5614,5639,5664,5689,5714,5739,5764,5789,
5814,5839,5865,5890,5915,5940,5966,5991,6016,6042,6067,6092,6118,6143,6168,
6193,6219,6244,6247,6252,6258,6266,6275,6286,6298,6312,6327,6344,6363,6384,
6407,6431,6457,6484,6513,6543,6574,6607,6640,6674,6709,6744,6779,6815,6850,
6885,6920,6954,6988,7020,7052,7083,7112,7141,7168,7194,7218,7242,7267,7292,
7317,7342,7367,7393,7418,7443,7469,7494,7519,7545,7570,7595,7621,7646,7671,
7696,7721,7747,7756,7766,7778,7792,7807,7824,7843,7864,7887,7911,7937,7965,
7994,8024,8055,8088,8121,8154,8188,8222,8255,8289,8321,8353,8383,8413,8441,
8468,8493,8517,8539,8560,8579,8596,8621,8647,8672,8697,8723,8748,8773,8799,
8824,8849,8875,8900,8926,8951,8976,9002,9027,9052,9077,9102,9113,9124,9137,
9152,9168,9186,9205,9227,9250,9274,9300,9328,9356,9387,9418,9450,9482,9516,
9549,9583,9616,9649,9682,9714,9745,9775,9804,9832,9858,9883,9907,9929,9949,
9968,9986,10002,10027,10052,10078,10103,10128,10153,10179,10204,10229,10255,
10280,10305,10331,10356,10381,10407,10432,10457,10483,10508,10533,10559,
10584,10609,10634,10659,10686,10713,10743,10774,10806,10840,10874,10910,
10946,10983,11019,11056,11092,11127,11162,11195,11226,11256,11283,11308,
11331,11352,11370,11385,11399,11409,11418,11425,11429,11432,11433,11458,
11483,11508,11533,11558,11583,11608,11634,11659,11684,11709,11734,11760,
11785,11810,11835,11861,11886,11911,11936,11962,11987,12012,12037,12062,
12087,12112,12137,12163,12188,12213,12238,12263,12288,12313,12338,12363,
12388,12413,12437,12462,12487,12512,12537,12562,12587,12612,12637,12662,
12687,12712,12737,12762,12787,12812,12837,12862,12887,12912,12937,12962,
12987,13012,13037,13063,13088,13113,13138,13164,13189,13214,13239,13264,
13290,13315,13340,13365,13390,13415,13440,13465,13490,13515,13540,13565,
13590,13615,13640,13665,13690,13715,13740,13765,13790,13815,13839,13864,
13879,13905,13937,13967,13988,14013,14038,14062,14087,14112,14137,14162,
14187,14212,14237,14262,14286,14311,14336,14361,14386,14412,14437,14462,
14487,14512,14537,14563,14588,14613,14638,14663,14689,14714,14739,14764,
14789,14814,14839,14864,14889,14914,14939,14964,14989,15014,15039,15064,
15089,15114,15139,15164,15189,15214,15240,15265,15290,15315,15340,15365,
15390,15415,15440,15465,15490,15515,15540,15565,15591,15616,15641,15666,
15691,15716,15741,15766,15791,15816,15841,15866,15891,15917,15942,15967,
15992,16017,16042,16067,16092,16117,16142,16167,16192,16217,16241,16266,
16291,16316,16341,16366,16391,16416,16441,16466,16491,16516,16541,16566,
16591,16616,16640,16665,16690,16715,16740,16765,16790,16815,16840,16864,
16889,16914,16939,16964,16989,17014,17039,17064,17088,17113,17138,17163,
17188,17213,17238,17263,17288,17313,17338,17363,17388,17413,17438,17462,
17487,17512,17537,17562,17587,17612,17637,17662,17686,17711,17736,17761,
17786,17811,17835,17860,17885,17910,17935,17960,17984,18009,18034,18059,
18084,18109,18133,18158,18183,18208,18233,18258,18283,18308,18333,18358,
18383,18408,18433,18458,18483,18508,18533,18558,18583,18608,18632,18657,
18682,18707,18732,18756,18781,18806,18831,18856,18880,18905,18930,18955,
18980,19004,19029,19054,19079,19104,19128,19153,19178,19203,19228,19252,
19277,19302,19327,19351,19376,19401,19426,19451,19476,19500,19525,19550,
19575,19600,19625,19650,19675,19700,19725,19750,19775,19800,19824,19849,
19874,19899,19924,19949,19974,19999,20023,20048,20073,20098,20123,20148,
20173,20197,20222,20247,20272,20296,20321,20346,20370,20395,20420,20444,
20469,20494,20519,20543,20568,20593,20618,20642,20667,20692,20716,20741,
20766,20790,20815,20840,20865,20889,20914,20939,20964,20989,21014,21039,
21064,21089,21114,21139,21164,21189,21214,21239,21264,21289,21314,21339,
21364,21389,21414,21439,21464,21489,21514,21539,21564,21589,21614,21638,
21663,21688,21713,21738,21763,21788,21813,21821,21832,21846,21864,21886,
21912,21940,21971,22004,22038,22071,22104,22135,22164,22190,22213,22233,
22258,22283,22308,22333,22358,22383,22408,22433,22458,22484,22509,22534,
22559,22585,22610,22635,22660,22685,22711,22736,22761,22786,22811,22836,
22861,22886,22911,22936,22961,22986,23012,23037,23062,23087,23112,23137,
23152,23169,23187,23208,23230,23254,23280,23307,23336,23367,23398,23431,
23463,23497,23530,23563,23595,23626,23656,23685,23712,23737,23760,23781,
23800,23817,23832,23845,23857,23882,23907,23932,23957,23983,24008,24033,
24059,24084,24110,24135,24160,24186,24211,24237,24262,24288,24313,24339,
24364,24389,24401,24415,24430,24446,24464,24483,24504,24527,24551,24577,
24604,24632,24662,24693,24724,24756,24789,24822,24856,24889,24922,24954,
24986,25017,25047,25076,25104,25130,25155,25178,25200,25220,25239,25256,
25272,25286,25311,25336,25362,25387,25412,25438,25463,25488,25514,25539,
25565,25590,25615,25641,25666,25691,25717,25742,25767,25792,25817,25832,
25849,25868,25890,25913,25940,25968,25998,26029,26062,26095,26128,26161,
26193,26224,26253,26280,26305,26327,26347,26364,26379,26391,26416,26441,
26467,26492,26517,26542,26567,26592,26617,26642,26667,26693,26718,26743,
26769,26794,26820,26845,26871,26896,26922,26947,26972,26998,27023,27049,
27074,27099,27111,27127,27148,27174,27203,27234,27268,27301,27332,27361,
27386,27407,27424,27449,27474,27499,27524,27549,27574,27599,27624,27649,
27674,27699,27725,27757,27774,27802,27824,27849,27874,27899,27924,27949,
27974,27999,28024,28049,28074,28099,28124,28150,28175,28200,28225,28251,
28276,28301,28326,28352,28377,28402,28427,28453,28478,28503,28528,28554,
28579,28604,28629,28654,28680,28705,28730,28755,28780,28805,28830,28850,
28872,28897,28925,28955,28987,29020,29054,29088,29121,29153,29182,29209,
29233,29253,29271,29285,29296,29304,29329,29354,29379,29404,29429,29455,
29480,29505,29530,29555,29581,29606,29631,29656,29681,29707,29732,29757,
29782,29807,29833,29858,29883,29908,29933,29958,29983,30008,30033,30058,
30084,30109,30134,30159,30184,30209,30234,30259,30284,30309,30334,30359,
30384,30409,30434,30449,30472,30502,30535,30566,30591,30608,30633,30658,
30683,30708,30733,30758,30783,30808,30833,30858,30883,30908,30933,30958,
30983,31008,31033,31058,31083,31108,31133,31158,31183,31208,31233,31258,
31283,31308,31333,31358,31383,31408,31433,31458,31483,31508,31533,31558,
31583,31608,31633,31658,31683,31708,31733,31758,31783,31808,31832,31857,
31882,31907,31932,31957,31982,32006,32031,32056,32081,32106,32131,32156,
32181,32206,32230,32255,32280,32305,32330,32355,32380,32405,32430,32455,
32480,32505,32530,32555,32580,32605,32630,32655,32680,32705,32730,32755,
32780,32805,32830,32855,32880,32905,32930,32955,32980,33005,33030,33055,
33080,33105,33130,33155,33180,33205,33230,33255,33280,33305,33331,33356,
33381,33406,33432,33457,33482,33507,33532,33548,33566,33587,33609,33633,
33660,33688,33718,33749,33781,33814,33847,33880,33912,33943,33973,34001,
34027,34051,34072,34092,34109,34124,34137,34148,34173,34199,34224,34249,
34274,34300,34325,34350,34375,34400,34425,34450,34475,34500,34525,34550,
34575,34600,34625,34650,34675,34700,34724,34749,34774,34799,34824,34848,
34873,34898,34923,34948,34972,34997,35022,35047,35072,35097,35122,35146,
35171,35196,35221,35246,35271,35296,35321,35345,35370,35395,35420,35445,
35470,35495,35520,35545,35570,35595,35620,35645,35670,35695,35720,35745,
35770,35795,35820,35845,35870,35895,35920,35945,35970,35995,
};

int int_z_list[MAX_RECORD_SIZE] = {
1224,1224,1224,1224,1224,1224,1224,1225,1225,1225,1225,1225,1224,1224,1224,
1224,1224,1223,1223,1223,1223,1222,1222,1221,1221,1220,1219,1219,1218,1218,
1217,1216,1215,1215,1214,1213,1212,1211,1210,1209,1208,1207,1206,1205,1204,
1203,1202,1200,1199,1198,1197,1196,1195,1194,1192,1191,1189,1188,1187,1185,
1184,1182,1180,1179,1177,1176,1174,1173,1171,1170,1168,1166,1164,1163,1162,
1159,1157,1156,1154,1153,1151,1149,1147,1145,1144,1141,1140,1138,1137,1135,
1133,1131,1130,1128,1127,1125,1124,1122,1120,1119,1118,1116,1115,1113,1112,
1110,1109,1107,1106,1104,1103,1102,1100,1099,1098,1096,1095,1093,1092,1091,
1089,1088,1087,1085,1084,1083,1082,1080,1079,1077,1076,1075,1074,1073,1072,
1070,1069,1068,1067,1065,1064,1063,1062,1060,1059,1057,1056,1056,1055,1053,
1052,1050,1049,1048,1046,1045,1044,1043,1042,1041,1039,1038,1037,1037,1036,
1035,1033,1032,1031,1030,1028,1028,1028,1027,1026,1024,1023,1022,1022,1021,
1021,1020,1019,1018,1017,1015,1014,1014,1015,1014,1013,1012,1010,1009,1008,
1007,1007,1007,1005,1004,1003,1003,1002,1002,1001,1000,1000,1000,1000,999,
998,997,995,994,993,992,991,989,988,987,987,986,986,985,984,983,982,982,
981,981,981,980,979,978,978,977,977,976,976,975,975,974,974,973,973,973,
972,971,971,971,972,972,971,971,971,971,971,970,970,969,970,970,969,969,
968,968,968,967,967,967,966,965,965,964,964,963,962,963,962,962,962,961,
960,961,961,960,960,959,959,960,960,959,958,958,959,958,958,958,958,958,
958,958,958,958,959,958,958,958,957,958,958,959,958,959,958,957,958,959,
959,958,957,958,958,958,958,957,958,958,958,958,958,958,958,958,958,958,
958,958,958,958,959,959,959,959,959,960,960,960,960,960,961,961,961,961,
961,961,961,962,962,963,963,963,963,963,963,962,963,963,964,964,965,964,
964,964,965,965,966,966,967,966,968,968,968,969,969,969,969,970,970,970,
970,970,970,971,971,971,972,972,971,972,973,973,973,974,974,974,975,975,
975,976,976,976,977,977,977,978,979,979,979,980,981,981,982,982,982,983,
984,984,984,986,986,987,989,988,989,990,990,992,992,994,994,995,997,998,
998,999,1000,1000,1000,1001,1000,1002,1001,1001,1003,1003,1003,1003,1004,
1004,1005,1006,1007,1007,1008,1009,1010,1010,1011,1012,1013,1013,1014,1015,
1015,1016,1017,1018,1019,1020,1020,1021,1022,1023,1024,1025,1026,1027,1028,
1029,1030,1031,1032,1033,1034,1034,1035,1036,1037,1037,1038,1039,1040,1041,
1042,1043,1044,1045,1046,1047,1048,1049,1050,1051,1052,1053,1054,1055,1056,
1057,1058,1059,1060,1061,1061,1063,1063,1064,1065,1066,1067,1068,1069,1070,
1071,1072,1074,1074,1076,1077,1078,1079,1080,1081,1082,1084,1085,1086,1086,
1087,1088,1089,1090,1091,1090,1091,1094,1095,1097,1098,1099,1100,1101,1103,
1104,1105,1105,1107,1109,1109,1111,1112,1113,1114,1115,1116,1117,1118,1119,
1120,1121,1122,1123,1124,1125,1126,1128,1129,1130,1131,1132,1134,1135,1136,
1137,1138,1139,1140,1142,1144,1144,1145,1146,1147,1148,1149,1150,1151,1152,
1153,1154,1156,1157,1158,1159,1161,1162,1163,1165,1166,1166,1167,1169,1171,
1171,1172,1173,1176,1178,1179,1179,1179,1180,1181,1182,1183,1184,1186,1186,
1188,1189,1191,1192,1193,1194,1195,1197,1198,1199,1200,1201,1202,1203,1204,
1205,1205,1206,1207,1208,1209,1209,1210,1211,1212,1212,1213,1214,1215,1216,
1216,1217,1217,1217,1218,1217,1217,1218,1217,1217,1217,1217,1217,1217,1217,
1217,1216,1216,1216,1216,1216,1216,1216,1216,1216,1216,1215,1215,1215,1215,
1215,1215,1215,1215,1215,1215,1214,1214,1214,1214,1214,1213,1213,1213,1213,
1212,1213,1212,1212,1212,1212,1212,1212,1211,1211,1210,1210,1210,1209,1209,
1209,1208,1208,1207,1207,1207,1206,1206,1206,1205,1205,1205,1205,1205,1204,
1204,1203,1203,1203,1203,1202,1201,1201,1200,1200,1200,1199,1198,1198,1198,
1197,1196,1196,1195,1194,1194,1193,1194,1193,1192,1192,1192,1192,1190,1190,
1190,1189,1190,1190,1190,1190,1189,1187,1187,1186,1186,1186,1185,1185,1184,
1184,1184,1183,1183,1182,1182,1181,1181,1180,1180,1179,1179,1178,1178,1178,
1177,1177,1176,1176,1176,1174,1173,1174,1174,1172,1172,1172,1171,1171,1171,
1169,1169,1170,1169,1169,1168,1166,1166,1165,1166,1166,1166,1164,1164,1164,
1162,1162,1161,1160,1160,1161,1161,1160,1158,1157,1157,1157,1156,1155,1155,
1154,1154,1153,1153,1153,1154,1152,1151,1151,1150,1150,1150,1150,1149,1149,
1149,1148,1148,1147,1147,1147,1146,1145,1144,1143,1143,1143,1144,1143,1143,
1143,1142,1141,1141,1140,1139,1138,1138,1137,1137,1137,1137,1136,1136,1135,
1134,1134,1133,1132,1132,1133,1132,1131,1131,1130,1131,1131,1131,1131,1131,
1130,1130,1129,1128,1128,1127,1127,1127,1126,1126,1125,1125,1125,1125,1124,
1124,1123,1122,1122,1123,1122,1122,1122,1122,1121,1120,1119,1119,1119,1118,
1118,1118,1117,1116,1116,1116,1115,1114,1115,1115,1114,1113,1113,1113,1112,
1113,1113,1112,1111,1111,1111,1111,1110,1109,1109,1110,1110,1109,1108,1108,
1109,1109,1108,1107,1107,1108,1107,1106,1107,1106,1106,1106,1107,1106,1105,
1105,1105,1105,1105,1105,1104,1105,1104,1104,1104,1103,1104,1103,1102,1102,
1102,1102,1102,1101,1101,1100,1101,1100,1100,1100,1099,1100,1099,1098,1099,
1099,1099,1098,1098,1098,1098,1098,1097,1097,1097,1097,1097,1097,1096,1097,
1097,1097,1096,1096,1097,1096,1096,1096,1096,1095,1095,1096,1096,1096,1095,
1096,1096,1095,1095,1095,1095,1094,1094,1094,1095,1094,1095,1095,1095,1095,
1095,1095,1094,1094,1094,1094,1094,1094,1094,1094,1094,1094,1094,1094,1095,
1094,1093,1094,1094,1094,1094,1093,1093,1093,1093,1092,1092,1093,1093,1092,
1092,1092,1093,1093,1093,1092,1093,1094,1094,1093,1094,1094,1094,1094,1095,
1095,1094,1095,1096,1096,1095,1095,1096,1097,1096,1095,1096,1097,1097,1096,
1096,1096,1097,1096,1097,1097,1097,1096,1097,1097,1096,1096,1097,1096,1096,
1097,1096,1096,1097,1096,1096,1097,1097,1096,1097,1097,1096,1097,1097,1097,
1097,1098,1098,1098,1098,1098,1098,1099,1099,1100,1100,1100,1100,1102,1101,
1101,1102,1102,1101,1102,1102,1103,1102,1103,1103,1102,1103,1103,1103,1104,
1104,1104,1104,1104,1104,1104,1104,1105,1105,1105,1105,1105,1105,1105,1105,
1105,1105,1105,1105,1106,1106,1106,1106,1106,1106,1107,1107,1107,1107,1108,
1108,1108,1109,1109,1109,1110,1110,1110,1111,1112,1112,1112,1113,1113,1114,
1115,1115,1115,1116,1116,1116,1117,1117,1117,1118,1118,1119,1119,1120,1119,
1120,1121,1120,1121,1121,1121,1122,1122,1122,1122,1123,1123,1123,1123,1124,
1124,1124,1125,1125,1125,1126,1126,1126,1127,1127,1127,1128,1128,1129,1129,
1130,1130,1131,1132,1132,1132,1133,1133,1134,1134,1135,1136,1136,1136,1137,
1138,1138,1139,1139,1139,1140,1140,1141,1142,1143,1142,1143,1144,1144,1145,
1146,1145,1145,1146,1147,1146,1148,1149,1149,1150,1151,1151,1152,1152,1152,
1153,1153,1153,1154,1155,1155,1156,1157,1157,1157,1157,1157,1158,1159,1160,
1160,1161,1162,1163,1164,1165,1165,1166,1166,1167,1167,1167,1168,1168,1168,
1169,1170,1171,1173,1174,1176,1176,1177,1178,1179,1180,1182,1183,1177,1179,
1180,1181,1182,1181,1182,1183,1183,1183,1184,1185,1186,1186,1187,1188,1188,
1189,1190,1190,1191,1192,1193,1193,1194,1195,1196,1196,1197,1198,1199,1200,
1201,1202,1203,1204,1205,1206,1207,1208,1208,1209,1210,1211,1212,1212,1213,
1213,1214,1214,1215,1216,1216,1217,1217,1217,1218,1218,1218,1218,1219,1219,
1219,1220,1220,1220,1221,1221,1221,1222,1222,1222,1222,1223,1223,1223,1223,
1224,1224,1224,1224,1224,1224,
};

int int_za_list[MAX_RECORD_SIZE] = {
20,45,70,95,120,145,170,195,220,245,270,295,320,345,370,395,420,445,470,
495,520,545,570,595,619,644,669,694,719,744,769,794,819,844,869,894,919,
944,969,994,1019,1044,1069,1094,1119,1144,1169,1194,1219,1244,1269,1294,
1319,1344,1369,1395,1420,1445,1470,1495,1520,1545,1570,1595,1620,1645,1671,
1696,1721,1746,1771,1796,1821,1846,1871,1896,1921,1946,1971,1996,2021,2046,
2071,2096,2121,2146,2171,2196,2221,2246,2271,2296,2321,2346,2370,2395,2420,
2445,2470,2495,2520,2545,2569,2594,2619,2644,2669,2694,2719,2743,2768,2793,
2818,2843,2868,2893,2918,2943,2968,2993,3018,3043,3068,3093,3118,3143,3168,
3193,3218,3243,3268,3293,3318,3343,3368,3393,3418,3443,3468,3493,3518,3543,
3568,3593,3618,3643,3668,3693,3717,3742,3767,3792,3817,3842,3867,3892,3917,
3942,3967,3991,4016,4041,4066,4091,4116,4141,4166,4191,4216,4241,4266,4291,
4316,4341,4366,4391,4416,4441,4466,4491,4516,4541,4566,4591,4617,4642,4667,
4692,4717,4742,4767,4792,4817,4842,4867,4892,4917,4942,4967,4992,5017,5021,
5027,5036,5048,5064,5082,5104,5130,5158,5189,5221,5256,5291,5326,5362,5396,
5428,5459,5488,5515,5539,5564,5589,5614,5639,5664,5689,5714,5739,5764,5789,
5814,5839,5865,5890,5915,5940,5966,5991,6016,6042,6067,6092,6118,6143,6168,
6193,6219,6244,6247,6252,6258,6266,6275,6286,6298,6312,6327,6344,6363,6384,
6407,6431,6457,6484,6513,6543,6574,6607,6640,6674,6709,6744,6779,6815,6850,
6885,6920,6954,6988,7020,7052,7083,7112,7141,7168,7194,7218,7242,7267,7292,
7317,7342,7367,7393,7418,7443,7469,7494,7519,7545,7570,7595,7621,7646,7671,
7696,7721,7747,7756,7766,7778,7792,7807,7824,7843,7864,7887,7911,7937,7965,
7994,8024,8055,8088,8121,8154,8188,8222,8255,8289,8321,8353,8383,8413,8441,
8468,8493,8517,8539,8560,8579,8596,8621,8647,8672,8697,8723,8748,8773,8799,
8824,8849,8875,8900,8926,8951,8976,9002,9027,9052,9077,9102,9113,9124,9137,
9152,9168,9186,9205,9227,9250,9274,9300,9328,9356,9387,9418,9450,9482,9516,
9549,9583,9616,9649,9682,9714,9745,9775,9804,9832,9858,9883,9907,9929,9949,
9968,9986,10002,10027,10052,10078,10103,10128,10153,10179,10204,10229,10255,
10280,10305,10331,10356,10381,10407,10432,10457,10483,10508,10533,10559,
10584,10609,10634,10659,10686,10713,10743,10774,10806,10840,10874,10910,
10946,10983,11019,11056,11092,11127,11162,11195,11226,11256,11283,11308,
11331,11352,11370,11385,11399,11409,11418,11425,11429,11432,11433,11458,
11483,11508,11533,11558,11583,11608,11634,11659,11684,11709,11734,11760,
11785,11810,11835,11861,11886,11911,11936,11962,11987,12012,12037,12062,
12087,12112,12137,12163,12188,12213,12238,12263,12288,12313,12338,12363,
12388,12413,12437,12462,12487,12512,12537,12562,12587,12612,12637,12662,
12687,12712,12737,12762,12787,12812,12837,12862,12887,12912,12937,12962,
12987,13012,13037,13063,13088,13113,13138,13164,13189,13214,13239,13264,
13290,13315,13340,13365,13390,13415,13440,13465,13490,13515,13540,13565,
13590,13615,13640,13665,13690,13715,13740,13765,13790,13815,13839,13864,
13879,13905,13937,13967,13988,14013,14038,14062,14087,14112,14137,14162,
14187,14212,14237,14262,14286,14311,14336,14361,14386,14412,14437,14462,
14487,14512,14537,14563,14588,14613,14638,14663,14689,14714,14739,14764,
14789,14814,14839,14864,14889,14914,14939,14964,14989,15014,15039,15064,
15089,15114,15139,15164,15189,15214,15240,15265,15290,15315,15340,15365,
15390,15415,15440,15465,15490,15515,15540,15565,15591,15616,15641,15666,
15691,15716,15741,15766,15791,15816,15841,15866,15891,15917,15942,15967,
15992,16017,16042,16067,16092,16117,16142,16167,16192,16217,16241,16266,
16291,16316,16341,16366,16391,16416,16441,16466,16491,16516,16541,16566,
16591,16616,16640,16665,16690,16715,16740,16765,16790,16815,16840,16864,
16889,16914,16939,16964,16989,17014,17039,17064,17088,17113,17138,17163,
17188,17213,17238,17263,17288,17313,17338,17363,17388,17413,17438,17462,
17487,17512,17537,17562,17587,17612,17637,17662,17686,17711,17736,17761,
17786,17811,17835,17860,17885,17910,17935,17960,17984,18009,18034,18059,
18084,18109,18133,18158,18183,18208,18233,18258,18283,18308,18333,18358,
18383,18408,18433,18458,18483,18508,18533,18558,18583,18608,18632,18657,
18682,18707,18732,18756,18781,18806,18831,18856,18880,18905,18930,18955,
18980,19004,19029,19054,19079,19104,19128,19153,19178,19203,19228,19252,
19277,19302,19327,19351,19376,19401,19426,19451,19476,19500,19525,19550,
19575,19600,19625,19650,19675,19700,19725,19750,19775,19800,19824,19849,
19874,19899,19924,19949,19974,19999,20023,20048,20073,20098,20123,20148,
20173,20197,20222,20247,20272,20296,20321,20346,20370,20395,20420,20444,
20469,20494,20519,20543,20568,20593,20618,20642,20667,20692,20716,20741,
20766,20790,20815,20840,20865,20889,20914,20939,20964,20989,21014,21039,
21064,21089,21114,21139,21164,21189,21214,21239,21264,21289,21314,21339,
21364,21389,21414,21439,21464,21489,21514,21539,21564,21589,21614,21638,
21663,21688,21713,21738,21763,21788,21813,21821,21832,21846,21864,21886,
21912,21940,21971,22004,22038,22071,22104,22135,22164,22190,22213,22233,
22258,22283,22308,22333,22358,22383,22408,22433,22458,22484,22509,22534,
22559,22585,22610,22635,22660,22685,22711,22736,22761,22786,22811,22836,
22861,22886,22911,22936,22961,22986,23012,23037,23062,23087,23112,23137,
23152,23169,23187,23208,23230,23254,23280,23307,23336,23367,23398,23431,
23463,23497,23530,23563,23595,23626,23656,23685,23712,23737,23760,23781,
23800,23817,23832,23845,23857,23882,23907,23932,23957,23983,24008,24033,
24059,24084,24110,24135,24160,24186,24211,24237,24262,24288,24313,24339,
24364,24389,24401,24415,24430,24446,24464,24483,24504,24527,24551,24577,
24604,24632,24662,24693,24724,24756,24789,24822,24856,24889,24922,24954,
24986,25017,25047,25076,25104,25130,25155,25178,25200,25220,25239,25256,
25272,25286,25311,25336,25362,25387,25412,25438,25463,25488,25514,25539,
25565,25590,25615,25641,25666,25691,25717,25742,25767,25792,25817,25832,
25849,25868,25890,25913,25940,25968,25998,26029,26062,26095,26128,26161,
26193,26224,26253,26280,26305,26327,26347,26364,26379,26391,26416,26441,
26467,26492,26517,26542,26567,26592,26617,26642,26667,26693,26718,26743,
26769,26794,26820,26845,26871,26896,26922,26947,26972,26998,27023,27049,
27074,27099,27111,27127,27148,27174,27203,27234,27268,27301,27332,27361,
27386,27407,27424,27449,27474,27499,27524,27549,27574,27599,27624,27649,
27674,27699,27725,27757,27774,27802,27824,27849,27874,27899,27924,27949,
27974,27999,28024,28049,28074,28099,28124,28150,28175,28200,28225,28251,
28276,28301,28326,28352,28377,28402,28427,28453,28478,28503,28528,28554,
28579,28604,28629,28654,28680,28705,28730,28755,28780,28805,28830,28850,
28872,28897,28925,28955,28987,29020,29054,29088,29121,29153,29182,29209,
29233,29253,29271,29285,29296,29304,29329,29354,29379,29404,29429,29455,
29480,29505,29530,29555,29581,29606,29631,29656,29681,29707,29732,29757,
29782,29807,29833,29858,29883,29908,29933,29958,29983,30008,30033,30058,
30084,30109,30134,30159,30184,30209,30234,30259,30284,30309,30334,30359,
30384,30409,30434,30449,30472,30502,30535,30566,30591,30608,30633,30658,
30683,30708,30733,30758,30783,30808,30833,30858,30883,30908,30933,30958,
30983,31008,31033,31058,31083,31108,31133,31158,31183,31208,31233,31258,
31283,31308,31333,31358,31383,31408,31433,31458,31483,31508,31533,31558,
31583,31608,31633,31658,31683,31708,31733,31758,31783,31808,31832,31857,
31882,31907,31932,31957,31982,32006,32031,32056,32081,32106,32131,32156,
32181,32206,32230,32255,32280,32305,32330,32355,32380,32405,32430,32455,
32480,32505,32530,32555,32580,32605,32630,32655,32680,32705,32730,32755,
32780,32805,32830,32855,32880,32905,32930,32955,32980,33005,33030,33055,
33080,33105,33130,33155,33180,33205,33230,33255,33280,33305,33331,33356,
33381,33406,33432,33457,33482,33507,33532,33548,33566,33587,33609,33633,
33660,33688,33718,33749,33781,33814,33847,33880,33912,33943,33973,34001,
34027,34051,34072,34092,34109,34124,34137,34148,34173,34199,34224,34249,
34274,34300,34325,34350,34375,34400,34425,34450,34475,34500,34525,34550,
34575,34600,34625,34650,34675,34700,34724,34749,34774,34799,34824,34848,
34873,34898,34923,34948,34972,34997,35022,35047,35072,35097,35122,35146,
35171,35196,35221,35246,35271,35296,35321,35345,35370,35395,35420,35445,
35470,35495,35520,35545,35570,35595,35620,35645,35670,35695,35720,35745,
35770,35795,35820,35845,35870,35895,35920,35945,35970,35995,
};

float r_list[MAX_RECORD_SIZE];
float a_list[MAX_RECORD_SIZE];
float z_list[MAX_RECORD_SIZE];
float za_list[MAX_RECORD_SIZE];

float even_r_list[MAX_RECORD_SIZE];
float even_a_list[MAX_RECORD_SIZE];
float even_z_list[MAX_RECORD_SIZE];
float even_za_list[MAX_RECORD_SIZE];



/// radian -> degree
/// \param radian
/// \return degree
static float radian2degree(float radian)
{
	return 180.0 * radian / CONST_PI;
}

/// degree -> radian 
/// \param degree
/// \return radian
static float degree2radian(float degree)
{
	return CONST_PI * degree / 180.0;
}


/// angle data list 에서 특정 각도와 가장 근사한 index 구함
/// \param src_type source data type, 0 - huvitz data, 1 - vca dcs data
/// \param angle_list
/// \param record_count
/// \param angle 시작 angle, VCA DCS 시작 angle 은 270 degree 
/// \return index
static int find_start_angle_idx(int src_type, float *angle_list, int record_count, float angle)
{
	float min = 2 * CONST_PI;
	float diff;
	int i;
	int idx = 0;
	float std;
       
	if ( src_type == 0 ) {
		std = 2 * CONST_PI * angle/360.0;
	} else {
		std = angle;
	}

	for (i = 0 ;i < record_count; i++ ) {
		diff = std - angle_list[i];
		if ( diff < 0.0 ) {
			continue;
		}
		if ( diff <= min ) {
			min = diff;
			idx = i;
		}
	}
	return idx;
}

/// 데이터 방향 전환 
/// HUVITZ 데이터를 VCA DCS style 로 데이터 방향 변환 or vice versa
/// HUVITZ 데이터는 6시 방향을 시작점으로 해서 시계방향으로 진행한다.
/// VCA DCS 데이터는 3시 방향을 시작점으로 해서 반시계방향으로 진행한다.
/// \param src_type source data type, 0 - huvitz data, 1 - vca dcs data
/// \param r_list 
/// \param a_list
/// \param record_count
/// \param start_idx
/// \param std_angle
/// \param new_r_list (out)
/// \param new_a_list (out)
static void relocate_data_orientation(int src_type, float *r_list, float *a_list, int record_count, int start_idx, float std_angle, float *new_r_list, float *new_a_list)
{
	int i, k;
	float std, add;
       
	if ( src_type == 0 ) {
		std = 2 * CONST_PI * std_angle/360.0;
		add = 2 * CONST_PI;
	} else {
		std = std_angle;
		add = 360.0;
	}

	for ( i = start_idx, k = 0; i >= 0 ; i--, k++) {
		new_r_list[k] = r_list[i];
		new_a_list[k] = std - a_list[i];
		if ( new_a_list[k] < 0.0 ) {
			new_a_list[k] += add;
		}
	}
	for ( i = record_count - 1; i > start_idx; i--, k++) {
		new_r_list[k] = r_list[i];
		new_a_list[k] = std - a_list[i];
		if ( new_a_list[k] < 0.0 ) {
			new_a_list[k] += add;
		}
	}
}

/// 등각 각도 데이터 생성
/// \param start_angle 시작 각도 (degree)
/// \param record_count 데이터 개수
/// \param type 출력 타입 : 0-huvitz format (radian 값으로 설정), 1-vca dcs format (degree 로 설정)
/// \param a_list (out)
static void fill_even_angle_data(float start_angle, int record_count, int type, float *a_list)
{
	int i;
	float add;

	if ( type == 0 ) {
		add = 2 * CONST_PI * start_angle/360.0;
		for ( i = 0; i < record_count ; i++) {
			a_list[i] = ((2 * CONST_PI) * i / record_count) + add ;
		}
	} else {
		add = start_angle;
		for ( i = 0; i < record_count ; i++) {
			a_list[i] = (360.0 * i / record_count) + add ;
		}
	}
}


/// 기울기가 theta 인 직선(원점지나는)과 (sy,sx)-(ex,ey) 를 지나는 직전의 교점을 구한다
/// \param theta
/// \param sx
/// \param sy
/// \param ex
/// \param ey
/// \param px (out)
/// \param py (out)
static void get_intersection_point(float theta, float sx, float sy, float ex, float ey, float *px, float *py)
{

	double slope_a;
	double x, y;

	if ( sx == ex ) {
		x = sx;
		y = (sy + ey)/2.0;
	} else if ( theta == CONST_PI/2.0 || theta == CONST_PI * 3.0 / 2.0 ) {
		x = 0.0;
		y = sy - (sy-ey)*sx/(sx-ex);
	} else {
		slope_a = tan(theta);

		if ( slope_a == (sy-ey)/(sx-ex)) {
			x = sx;
			y = (sy + ey)/2.0;
		} else {
			x = ( sy - (sy-ey) * sx/(sx-ex)) / (slope_a - ( (sy-ey)/(sx-ex)));
			y = slope_a * x;
		}
	}

	*px = x;
	*py = y;
}

/// find max angle value and index
/// \param angle_list radian list
/// \param record_count
/// \param p_max (out) max angle  (radian)
/// \return index
static int find_max_angle(float *angle_list, int record_count, float *p_max)
{
	int i;
	float max_angle = 0.0;
	int max_idx = -1;

	for ( i = 0 ; i < record_count; i++ ) {
		if ( angle_list[i] > max_angle ) {
			max_angle = angle_list[i];
			max_idx = i;
		}
	}

	if (p_max ) {
		*p_max = max_angle;
	}
	return max_idx;
}

/// 지정한 각도의 전/후 포인트의 index 얻음
/// \param radius (in) radius data, mm 
/// \param angle (in) angle data, radius
/// \param record_count (in) 
/// \param theta (in) 
/// \param p_start (out) start index
/// \param p_end (out) end index
/// \return 0 success
/// \return -1 error
static int find_neighbor_index(float *radius_list, float *angle_list, int record_count, float theta, int *p_start, int *p_end)
{
	int i, found = 0;
	int prev = 0, cur = 0;
	int max_idx = 0;
	int start_idx = 0;

	static float *prev_r = NULL;
	static float *prev_a = NULL;
	static int prev_max_idx = 0;
	static int prev_start_idx = 0;

	if ( radius_list != NULL && angle_list != NULL ) {
		max_idx = prev_max_idx = find_max_angle(angle_list, record_count, NULL);
		start_idx = 0;
		prev_r = radius_list;
		prev_a = angle_list;
	} else {
		if ( prev_r == NULL || prev_a == NULL ) {
			return -1;
		}

		radius_list = prev_r;
		angle_list = prev_a;
		max_idx = prev_max_idx;
		start_idx = prev_start_idx;
	}

	for ( i = 0 ; i < record_count; i++ ) {
		prev = (start_idx + i - 1 + record_count) % record_count;
		cur = ( start_idx + i + record_count ) % record_count;
		if ( angle_list[prev] <= theta && theta <= angle_list[cur]) {
			found = 1;
			break;
		}
	}
	if (found ) {
		*p_start = prev;
		prev_start_idx = *p_end = cur;
	} else {
		*p_start = max_idx;
		prev_start_idx = *p_end = (max_idx + 1) % record_count;
	}
	return 0;
}


/// 부등각 r/theta 데이터를 등각 r/theta data 로 변환 (아직 제대로 검증은 안해봤는데, excel 로 확인해 보니 그렇저렇 비슷한 형상이 나온다)
///
/// 그리고....이 함수 무쟈게 비 효율적으로 만들었다. 
/// find_neighbor_index() 를 record_count 만큼 호출하는 방식은 개선이 필요하다 
///
/// \param r (in) 부등각 radius
/// \param a (in) 부등각 angle 
/// \param record_count (in) 데이터 갯수  
/// \param target_count (in) 등각 데이터 갯수 
/// \param equi_r (out) 등각 radius
/// \param equi_a (out) 등각 angle
static void conv_uneven_to_even(float *r, float *a, int record_count, int target_count, float *equi_r, float * equi_a)
{

	float temp_a = 2 * CONST_PI / (target_count);
	int i;
	int start, end;
	float equi_x, equi_y;

	find_neighbor_index(r, a, record_count, 0.0, &start, &end);

	for ( i = 0 ; i < target_count; i++ ) {
		equi_a[i] = temp_a * i;
		find_neighbor_index(NULL, NULL, record_count, equi_a[i], &start, &end);
		if ( start == end ) {
			equi_r[i] = r[i];
		} else {
			get_intersection_point(equi_a[i], r[start] * cos(a[start]), r[start] * sin(a[start]), r[end] * cos( a[end] ), r[end] * sin( a[end] ), &equi_x, &equi_y);

			equi_r[i] = sqrt( equi_x * equi_x + equi_y * equi_y );
		}
	}
}

float a[2000], r[2000];
float z[2000], za[2000];


/// DCS raw data 를 HUVITZ raw data 로 변환 
static void conv_DCS_raw_data_2_huvitz(void)
{
	int i;

	float tmp_r[MAX_RECORD_SIZE];
	float tmp_a[MAX_RECORD_SIZE];
	float tmp_z[MAX_RECORD_SIZE];
	float tmp_za[MAX_RECORD_SIZE];

	for ( i = 0 ; i < MAX_RECORD_SIZE; i++ ) {
		tmp_r[i] = (float)int_r_list[i] / 100.0;
		tmp_a[i] = (float)int_a_list[i] / 100.0;
		tmp_z[i] = (float)int_z_list[i] / 100.0;
		tmp_za[i] = (float)int_za_list[i] / 100.0;
	}


	i = find_start_angle_idx(1, tmp_a, MAX_RECORD_SIZE, 270.0);
	relocate_data_orientation(1, tmp_r, tmp_a, MAX_RECORD_SIZE, i, 270.0, r_list, a_list);

	i = find_start_angle_idx(1, tmp_za, MAX_RECORD_SIZE, 270.0);
	relocate_data_orientation(1, tmp_z, tmp_za, MAX_RECORD_SIZE, i, 270.0, z_list, za_list);

	for ( i = 0 ; i < MAX_RECORD_SIZE; i++ ) {
		a_list[i] = degree2radian(a_list[i]);
		za_list[i] = degree2radian(za_list[i]);
	}
}

/// DCS raw data 를 HUVITZ raw data 로 변환 
static void conv_HUVITZ_raw_data_2_dcs(int count)
{
	int i;
	float tmp_r[MAX_RECORD_SIZE];
	float tmp_a[MAX_RECORD_SIZE];
	float tmp_z[MAX_RECORD_SIZE];
	float tmp_za[MAX_RECORD_SIZE];

	i = find_start_angle_idx(0, a, count, 270.0);
	relocate_data_orientation(0, r, a, count, i, 270.0, tmp_r, tmp_a);

	i = find_start_angle_idx(0, za, count, 270.0);
	relocate_data_orientation(0, z, za, count, i, 270.0, tmp_z, tmp_za);

	for ( i = 0 ; i < MAX_RECORD_SIZE; i++ ) {
		int_r_list[i] = round(tmp_r[i] * 100);
		int_a_list[i] = round(radian2degree(tmp_a[i]) * 100);
		int_z_list[i] = round(tmp_z[i] * 100);
		int_za_list[i] = round(radian2degree(tmp_za[i]) * 100);
	}
}


#define TARGET_COUNT 1440


int main(void)
{
	int i;

	printf("HUVITZ uneven to even test\n");

	conv_DCS_raw_data_2_huvitz();

	printf("SOURCE DATA\n");
	for (i = 0 ; i < MAX_RECORD_SIZE; i++ ) {
		printf("%d, %.4f, %.4f, %.4f, %.4f\n", i, r_list[i], a_list[i], z_list[i], za_list[i]);
	}

	conv_uneven_to_even(r_list, a_list, MAX_RECORD_SIZE, TARGET_COUNT, r, a);
	conv_uneven_to_even(z_list, za_list, MAX_RECORD_SIZE, TARGET_COUNT, z, za);


	printf("CONVERTED DATA (Huvitz style)\n");
	for (i = 0 ; i < TARGET_COUNT; i++ ) {
		printf("%d, %.4f, %.4f, %.4f, %.4f\n", i, r[i], a[i], z[i], za[i]);
	}

	conv_HUVITZ_raw_data_2_dcs(TARGET_COUNT);

	printf("CONVERTED DATA (DCS style)\n");
	for (i = 0 ; i < TARGET_COUNT; i++ ) {
		printf("%d, %d, %d, %d, %d\n", i, int_r_list[i], int_a_list[i], int_z_list[i], int_za_list[i]);
	}


#if 0
	conv_uneven_to_even(r_list, a_list, 1440, 500, r, a);

	for (i = 0 ; i < 1440; i++ ) {
		printf("%d, %.4f, %.4f\n", i, r_list[i], a_list[i]);
	}

	for (i = 0 ; i < 500; i++ ) {
		printf("%.4f, %.4f\n", r[i], a[i]);
	}
#endif 
	return 0;
}

/********** end of file **********/
